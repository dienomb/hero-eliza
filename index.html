<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aventura en la Selva</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Comic Sans MS', 'Chalkboard SE', cursive;
      background: #0d2b0d;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    #game {
      width: 900px;
      height: 580px;
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 50px rgba(0,0,0,0.7);
    }

    /* ===== WORLD ===== */
    #world {
      width: 100%;
      height: 63%;
      position: relative;
      background: linear-gradient(180deg, #87CEEB 0%, #b5e8b5 55%, #4a8a20 100%);
      overflow: hidden;
    }

    .tree {
      position: absolute;
      bottom: 30px;
      font-size: 64px;
      opacity: 0.7;
      pointer-events: none;
    }

    #ground {
      position: absolute;
      bottom: 0; width: 100%; height: 48px;
      background: linear-gradient(180deg, #7B5B2A 0%, #5a3f15 100%);
    }

    #road {
      position: absolute;
      bottom: 12px; width: 100%; height: 28px;
      background: #c4922a;
      border-top: 2px solid #d4a835;
    }

    #road::after {
      content: '';
      position: absolute;
      top: 50%; left: 0; right: 0;
      border-top: 2px dashed rgba(255,255,255,0.2);
    }

    /* ===== COIN COUNTER ===== */
    #coin-counter {
      position: absolute;
      top: 8px; left: 10px;
      background: rgba(0,0,0,0.45);
      border-radius: 20px;
      padding: 5px 14px;
      color: #FFD700;
      font-size: 22px;
      font-weight: bold;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* ===== HERO (rider on horse) ===== */
    #hero {
      position: absolute;
      bottom: 18px;
      left: 3%;
      width: 95px;
      height: 110px;
      z-index: 5;
      transition: left 1s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #hero.gallop    { animation: gallop  1s ease; }
    #hero.shake     { animation: shake   0.5s ease; }
    #hero.celebrate { animation: bounce  0.5s ease infinite alternate; }

    @keyframes gallop {
      0%,100% { transform: translateY(0) rotate(0deg); }
      20%     { transform: translateY(-14px) rotate(-4deg); }
      40%     { transform: translateY(-7px)  rotate(2deg); }
      60%     { transform: translateY(-11px) rotate(-2deg); }
      80%     { transform: translateY(-5px)  rotate(1deg); }
    }
    @keyframes shake {
      0%,100%  { transform: translateX(0); }
      20%,60%  { transform: translateX(-9px); }
      40%,80%  { transform: translateX(9px); }
    }
    @keyframes bounce {
      from { transform: translateY(0); }
      to   { transform: translateY(-14px); }
    }

    /* ===== ENEMIES ===== */
    .enemy {
      position: absolute;
      bottom: 18px;
      width: 60px;
      height: 90px;
      z-index: 4;
      transition: transform 0.6s ease, opacity 0.6s ease;
      transform-origin: bottom center;
    }

    .enemy.defeated {
      transform: rotate(85deg) translateX(25px);
      opacity: 0.25;
    }

    /* ===== FLOATING COIN ===== */
    .float-coin {
      position: absolute;
      font-size: 30px;
      z-index: 20;
      pointer-events: none;
      animation: floatUp 0.9s ease forwards;
    }

    @keyframes floatUp {
      0%   { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-70px) scale(1.6); }
    }

    /* ===== CARROT BUCKET ===== */
    #bucket-wrap {
      position: absolute;
      bottom: 26px;
      right: 3%;
      width: 72px;
      height: 72px;
    }

    /* ===== QUESTION PANEL ===== */
    #panel {
      width: 100%;
      height: 37%;
      background: linear-gradient(180deg, #1b4a0a, #2e6b1c);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 10px;
      padding: 6px 20px;
      position: relative;
    }

    #panel::before {
      content: 'ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿';
      position: absolute;
      top: -4px; left: 0;
      font-size: 14px;
      letter-spacing: 1px;
      white-space: nowrap;
      overflow: hidden;
      pointer-events: none;
    }

    /* Emoji counting area */
    #emoji-area {
      text-align: center;
      line-height: 1.3;
      max-width: 840px;
      word-break: break-all;
      display: none;
    }

    /* Parent-read text */
    #q-text {
      color: white;
      font-size: 24px;
      text-align: center;
      max-width: 700px;
      display: none;
    }

    /* Answer buttons */
    #btns { display: flex; gap: 14px; }

    .btn {
      min-width: 140px;
      padding: 13px 10px;
      font-size: 28px;
      font-family: inherit;
      font-weight: bold;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      color: white;
      transition: transform 0.12s;
      text-align: center;
      line-height: 1.2;
    }

    .btn:hover:not(:disabled) { transform: scale(1.1); }
    .btn:active:not(:disabled) { transform: scale(0.93); }
    .btn:disabled { cursor: default; }

    .btn-a { background: #e74c3c; }
    .btn-b { background: #27ae60; }
    .btn-c { background: #2980b9; }

    .btn.flash-ok { animation: flashOk 0.5s ease; }
    .btn.flash-no { animation: flashNo 0.5s ease; }

    @keyframes flashOk { 50% { background: #f1c40f; transform: scale(1.15); } }
    @keyframes flashNo { 50% { background: #922b21; transform: scale(0.9);  } }

    /* ===== WIN SCREEN ===== */
    #win-screen {
      position: absolute; inset: 0;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 16px;
      z-index: 50;
      background: rgba(39,174,96,0.94);
    }

    #win-screen h1       { font-size: 48px; color: white; text-shadow: 2px 2px 8px #0004; }
    #win-screen .reward  { font-size: 44px; }
    #win-screen p        { font-size: 22px; color: white; }

    #win-screen .play-btn {
      padding: 14px 44px;
      font-size: 22px;
      font-family: inherit;
      background: white;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.1s;
    }
    #win-screen .play-btn:hover { transform: scale(1.07); }

    /* ===== CONFETTI ===== */
    .confetti {
      position: absolute;
      border-radius: 3px;
      pointer-events: none;
      animation: fall linear forwards;
    }

    @keyframes fall {
      from { opacity: 1; transform: translateY(-20px) rotate(0deg); }
      to   { opacity: 0; transform: translateY(620px) rotate(720deg); }
    }
  </style>
</head>
<body>

<div id="game">

  <!-- ===== WORLD ===== -->
  <div id="world">

    <!-- Jungle trees -->
    <span class="tree" style="left:3%">ğŸŒ´</span>
    <span class="tree" style="left:12%">ğŸŒ³</span>
    <span class="tree" style="left:22%">ğŸŒ´</span>
    <span class="tree" style="left:33%">ğŸŒ³</span>
    <span class="tree" style="left:43%">ğŸŒ´</span>
    <span class="tree" style="left:53%">ğŸŒ³</span>
    <span class="tree" style="left:63%">ğŸŒ´</span>
    <span class="tree" style="left:73%">ğŸŒ³</span>
    <span class="tree" style="left:84%">ğŸŒ´</span>

    <!-- Coin counter -->
    <div id="coin-counter">ğŸª™ <span id="coin-count">0</span></div>

    <!-- Ground & Road -->
    <div id="ground"></div>
    <div id="road"></div>

    <!-- Hero: rider on horse -->
    <div id="hero">
      <svg viewBox="0 0 95 110" xmlns="http://www.w3.org/2000/svg">

        <!-- â”€â”€ HORSE â”€â”€ -->
        <!-- Tail -->
        <path d="M10,78 Q2,68 4,82 Q8,72 6,86 Q10,76 8,90" stroke="#5D3A1A" stroke-width="3.5" fill="none" stroke-linecap="round"/>
        <!-- Body -->
        <ellipse cx="46" cy="80" rx="33" ry="17" fill="#8B4513"/>
        <!-- Rump highlight -->
        <ellipse cx="30" cy="74" rx="14" ry="8" fill="#9B5523" opacity="0.5"/>
        <!-- Neck -->
        <rect x="63" y="58" width="15" height="24" rx="7" fill="#8B4513"/>
        <!-- Head -->
        <ellipse cx="75" cy="52" rx="13" ry="10" fill="#8B4513"/>
        <!-- Ear left -->
        <polygon points="68,44 70,35 74,44" fill="#8B4513"/>
        <!-- Ear right -->
        <polygon points="76,44 78,35 82,44" fill="#8B4513"/>
        <!-- Eye -->
        <circle cx="80" cy="50" r="2.5" fill="#222"/>
        <circle cx="80.8" cy="49.3" r="1" fill="white"/>
        <!-- Nostril -->
        <ellipse cx="84" cy="56" rx="2" ry="1.5" fill="#6B3410"/>
        <!-- Mane -->
        <path d="M63,58 Q59,46 65,40 Q67,48 70,50 Q67,44 72,39 Q71,47 74,49" stroke="#4a2800" stroke-width="4" fill="none" stroke-linecap="round"/>
        <!-- Legs -->
        <rect x="20" y="93" width="9"  height="17" rx="4" fill="#7a3c10"/>
        <rect x="34" y="93" width="9"  height="17" rx="4" fill="#7a3c10"/>
        <rect x="53" y="93" width="9"  height="17" rx="4" fill="#7a3c10"/>
        <rect x="67" y="93" width="9"  height="17" rx="4" fill="#7a3c10"/>
        <!-- Hooves -->
        <rect x="19"  y="108" width="11" height="4" rx="2" fill="#222"/>
        <rect x="33"  y="108" width="11" height="4" rx="2" fill="#222"/>
        <rect x="52"  y="108" width="11" height="4" rx="2" fill="#222"/>
        <rect x="66"  y="108" width="11" height="4" rx="2" fill="#222"/>

        <!-- â”€â”€ RIDER â”€â”€ -->
        <!-- Dark legs (straddling horse) -->
        <rect x="31" y="68" width="9"  height="19" rx="3" fill="#2c3e50"/>
        <rect x="50" y="68" width="9"  height="19" rx="3" fill="#2c3e50"/>
        <!-- Yellow body suit -->
        <rect x="27" y="46" width="36" height="26" rx="6" fill="#F1C40F"/>
        <!-- Chest emblem -->
        <polygon points="45,51 49,58 41,58" fill="#E67E22"/>
        <!-- Belt -->
        <rect x="27" y="64" width="36" height="6" rx="3" fill="#E67E22"/>
        <!-- Arms -->
        <rect x="16" y="47" width="12" height="20" rx="5" fill="#F1C40F"/>
        <rect x="67" y="47" width="12" height="20" rx="5" fill="#F1C40F"/>
        <!-- Hands (green) -->
        <ellipse cx="22" cy="70" rx="6" ry="6" fill="#27AE60"/>
        <ellipse cx="73" cy="70" rx="6" ry="6" fill="#27AE60"/>
        <!-- Hair -->
        <ellipse cx="45" cy="32" rx="14" ry="12" fill="#222"/>
        <polygon points="32,28 27,18 37,26" fill="#222"/>
        <polygon points="38,23 37,15 43,23" fill="#222"/>
        <polygon points="47,21 48,13 53,22" fill="#222"/>
        <polygon points="56,26 62,18 59,28" fill="#222"/>
        <!-- Face -->
        <ellipse cx="45" cy="37" rx="12" ry="11" fill="#FDBCB4"/>
        <!-- Eyes -->
        <circle cx="40" cy="35" r="2.8" fill="#222"/>
        <circle cx="50" cy="35" r="2.8" fill="#222"/>
        <circle cx="40.9" cy="34.2" r="1.1" fill="white"/>
        <circle cx="50.9" cy="34.2" r="1.1" fill="white"/>
        <!-- Smile -->
        <path d="M39,41 Q45,47 51,41" stroke="#c0392b" stroke-width="1.8" fill="none" stroke-linecap="round"/>

      </svg>
    </div>

    <!-- Carrot Bucket -->
    <div id="bucket-wrap">
      <svg viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
        <!-- Bucket body -->
        <path d="M10,26 L15,64 L57,64 L62,26 Z" fill="#8B4513"/>
        <path d="M10,26 L15,64 L57,64 L62,26 Z" fill="none" stroke="#6B3410" stroke-width="2"/>
        <!-- Bucket rim -->
        <rect x="8" y="20" width="56" height="9" rx="4" fill="#A0522D"/>
        <!-- Handle -->
        <path d="M18,20 Q36,7 54,20" stroke="#6B3410" stroke-width="3.5" fill="none" stroke-linecap="round"/>
        <!-- Carrots sticking out -->
        <text x="8"  y="22" font-size="24">ğŸ¥•</text>
        <text x="25" y="17" font-size="24">ğŸ¥•</text>
        <text x="43" y="22" font-size="24">ğŸ¥•</text>
      </svg>
    </div>

  </div><!-- /world -->

  <!-- ===== QUESTION PANEL ===== -->
  <div id="panel">
    <div id="emoji-area"></div>
    <div id="q-text"></div>
    <div id="btns">
      <button class="btn btn-a" onclick="answer(0)">?</button>
      <button class="btn btn-b" onclick="answer(1)">?</button>
      <button class="btn btn-c" onclick="answer(2)">?</button>
    </div>
  </div>

  <!-- ===== WIN SCREEN ===== -->
  <div id="win-screen">
    <h1>ğŸ‰ Â¡Ganaste! ğŸ‰</h1>
    <div class="reward">ğŸª™ Ã— <span id="final-coins">0</span></div>
    <p>Â¡Llenaste el cubo de zanahorias! ğŸ¥•ğŸ¥•ğŸ¥•</p>
    <button class="play-btn" onclick="resetGame()">Â¡Jugar otra vez! ğŸ´</button>
  </div>

</div><!-- /game -->

<script>
// ================================================================
// âœï¸  EDIT YOUR QUESTIONS HERE
//
//  type: "count" â†’ big emojis she counts herself
//  type: "read"  â†’ text you read aloud, she taps the emoji answer
//
//  ok: index of correct answer  (0 = left button, 1 = middle, 2 = right)
// ================================================================
const ALL_QUESTIONS = [

  // â”€â”€ COUNTING (25) â”€â”€ she counts the emojis and taps the number â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { type:"count", emojis:"ğŸ’ğŸ’ğŸ’",                                                                             a:["2","3","4"],      ok:1 },
  { type:"count", emojis:"ğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œ",                                                                         a:["4","5","6"],      ok:1 },
  { type:"count", emojis:"ğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒ",                                                                     a:["6","7","8"],      ok:1 },
  { type:"count", emojis:"ğŸğŸğŸğŸğŸğŸğŸğŸğŸ",                                                                 a:["8","9","10"],     ok:1 },
  { type:"count", emojis:"ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹",                                                         a:["11","12","13"],   ok:1 },
  { type:"count", emojis:"ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜",                                                     a:["13","14","15"],   ok:1 },
  { type:"count", emojis:"ğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒºğŸŒº",                                               a:["15","16","17"],   ok:2 },
  { type:"count", emojis:"ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦ğŸ¦",                                         a:["18","19","20"],   ok:1 },
  { type:"count", emojis:"ğŸ¦ğŸ¦ğŸ¦ğŸ¦",                                                                           a:["3","4","5"],      ok:1 },
  { type:"count", emojis:"ğŸŒ´ğŸŒ´ğŸŒ´ğŸŒ´ğŸŒ´ğŸŒ´",                                                                       a:["5","6","7"],      ok:1 },
  { type:"count", emojis:"ğŸ†ğŸ†ğŸ†ğŸ†ğŸ†ğŸ†ğŸ†ğŸ†",                                                                   a:["7","8","9"],      ok:1 },
  { type:"count", emojis:"ğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œ",                                                             a:["9","10","11"],    ok:1 },
  { type:"count", emojis:"ğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠ",                                                           a:["10","11","12"],   ok:1 },
  { type:"count", emojis:"ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸",                                                       a:["12","13","14"],   ok:1 },
  { type:"count", emojis:"ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’",                                                   a:["14","15","16"],   ok:1 },
  { type:"count", emojis:"ğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒ",                                                 a:["15","16","17"],   ok:1 },
  { type:"count", emojis:"ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹",                                           a:["17","18","19"],   ok:1 },
  { type:"count", emojis:"ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸ",                                       a:["18","19","20"],   ok:2 },
  { type:"count", emojis:"ğŸ¦“ğŸ¦“",                                                                               a:["1","2","3"],      ok:1 },
  { type:"count", emojis:"ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿",                                                                     a:["6","7","8"],      ok:1 },
  { type:"count", emojis:"ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸ğŸ¸",                                                             a:["9","10","11"],    ok:1 },
  { type:"count", emojis:"ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©ğŸ¦©",                                                   a:["13","14","15"],   ok:1 },
  { type:"count", emojis:"ğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œğŸ¦œ",                                               a:["15","16","17"],   ok:1 },
  { type:"count", emojis:"ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜",                                           a:["17","18","19"],   ok:1 },
  { type:"count", emojis:"ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’",                                       a:["18","19","20"],   ok:2 },

  // â”€â”€ PARENT READS (25) â”€â”€ you read it, she taps the right emoji â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  { type:"read", text:"Â¿CuÃ¡l tiene trompa?",                  a:["ğŸ’","ğŸ˜","ğŸ¦œ"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l vive en el rÃ­o?",                a:["ğŸ¦","ğŸŠ","ğŸ¦‹"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l puede volar?",                   a:["ğŸ˜","ğŸ¦","ğŸ¦œ"],   ok:2 },
  { type:"read", text:"Â¿CuÃ¡l es el mÃ¡s grande?",              a:["ğŸ’","ğŸ¦‹","ğŸ˜"],   ok:2 },
  { type:"read", text:"Â¿CuÃ¡l ruge en la selva?",              a:["ğŸ¦","ğŸ","ğŸ¦œ"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l tiene rayas negras y blancas?",  a:["ğŸ˜","ğŸ¦“","ğŸŠ"],   ok:1 },
  { type:"read", text:"Â¿QuÃ© come el mono?",                   a:["ğŸ¥©","ğŸŒ","ğŸ¥•"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l tiene el cuello mÃ¡s largo?",     a:["ğŸ¦’","ğŸ†","ğŸŠ"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l vive en los Ã¡rboles?",           a:["ğŸŠ","ğŸ¦","ğŸ’"],   ok:2 },
  { type:"read", text:"Â¿CuÃ¡l tiene manchas?",                 a:["ğŸ˜","ğŸ¦’","ğŸ¦“"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l nada muy bien?",                 a:["ğŸ¦","ğŸŸ","ğŸ˜"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l es verde?",                      a:["ğŸ¦","ğŸŠ","ğŸ˜"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l tiene colmillos grandes?",       a:["ğŸ’","ğŸ¦‹","ğŸ˜"],   ok:2 },
  { type:"read", text:"Â¿CuÃ¡l vuela de noche?",                a:["ğŸ¦‡","ğŸ˜","ğŸŠ"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l come hojas de Ã¡rbol?",           a:["ğŸ¦’","ğŸŠ","ğŸ¦"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l tiene la boca mÃ¡s grande?",      a:["ğŸ¦‹","ğŸ¦›","ğŸ’"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l hace mucho ruido en la selva?",  a:["ğŸ’","ğŸ¦‹","ğŸŸ"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l es muy lento?",                  a:["ğŸ¦","ğŸŒ","ğŸ’"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l tiene plumas de colores?",       a:["ğŸŠ","ğŸ¦œ","ğŸ˜"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l es amarillo?",                   a:["ğŸŒ","ğŸŠ","ğŸ˜"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l tiene 8 patas?",                 a:["ğŸ¦","ğŸŸ","ğŸ•·ï¸"],  ok:2 },
  { type:"read", text:"Â¿CuÃ¡l vive en el agua y en la tierra?",a:["ğŸ¦","ğŸ¸","ğŸ˜"],   ok:1 },
  { type:"read", text:"Â¿CuÃ¡l es el mÃ¡s pequeÃ±o?",             a:["ğŸ˜","ğŸ¦","ğŸ›"],   ok:2 },
  { type:"read", text:"Â¿CuÃ¡l puede cambiar de color?",        a:["ğŸ¦","ğŸ˜","ğŸ¦"],   ok:0 },
  { type:"read", text:"Â¿CuÃ¡l duerme colgado boca abajo?",     a:["ğŸŠ","ğŸ¦","ğŸ¦‡"],   ok:2 },
];

// ================================================================
// POSITIONS
// hero stop index:  0=start  1-7=near each enemy  8=at bucket
// ================================================================
const STOPS           = ['3%','10%','21%','32%','43%','54%','65%','76%','84%'];
const ENEMY_LEFT_PCT  = [14, 25, 36, 47, 58, 69, 80];   // % from left

// ================================================================
// GAME STATE
// ================================================================
let state = {};

function initGame() {
  state = {
    coins:    0,
    defeated: 0,
    questions: shuffle([...ALL_QUESTIONS]).slice(0, 7),
    busy:     false,
    current:  null,
  };

  document.getElementById('coin-count').textContent = '0';
  resetHero();
  buildEnemies();
  document.getElementById('win-screen').style.display = 'none';
  loadQuestion(state.questions[0]);
}

// ================================================================
// BUILD ENEMIES
// ================================================================
function buildEnemies() {
  document.querySelectorAll('.enemy').forEach(e => e.remove());

  ENEMY_LEFT_PCT.forEach((pct, i) => {
    const div = document.createElement('div');
    div.className = 'enemy';
    div.id        = 'enemy' + i;
    div.style.left = pct + '%';
    div.innerHTML  = (i % 2 === 0) ? lionSVG() : robotSVG();
    document.getElementById('world').appendChild(div);
  });
}

function lionSVG() {
  return `<svg viewBox="0 0 60 90" xmlns="http://www.w3.org/2000/svg">
    <ellipse cx="30" cy="26" rx="22" ry="20" fill="#7B3F00"/>
    <ellipse cx="30" cy="24" rx="15" ry="15" fill="#E8934A"/>
    <circle cx="24" cy="21" r="3"   fill="#222"/>
    <circle cx="36" cy="21" r="3"   fill="#222"/>
    <circle cx="24.9" cy="20.2" r="1.2" fill="white"/>
    <circle cx="36.9" cy="20.2" r="1.2" fill="white"/>
    <ellipse cx="30" cy="28" rx="3.5" ry="2.5" fill="#c0392b"/>
    <path d="M25,32 Q30,37 35,32" stroke="#c0392b" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="15" y="39" width="30" height="28" rx="6" fill="#F1C40F"/>
    <polygon points="30,44 34,51 26,51" fill="#E67E22"/>
    <rect x="15" y="58" width="30" height="6" rx="3" fill="#E67E22"/>
    <rect x="4"  y="40" width="12" height="20" rx="5" fill="#F1C40F"/>
    <rect x="44" y="40" width="12" height="20" rx="5" fill="#F1C40F"/>
    <ellipse cx="10"  cy="63" rx="6" ry="6" fill="#27AE60"/>
    <ellipse cx="50"  cy="63" rx="6" ry="6" fill="#27AE60"/>
    <rect x="17" y="67" width="10" height="20" rx="4" fill="#2c3e50"/>
    <rect x="33" y="67" width="10" height="20" rx="4" fill="#2c3e50"/>
    <ellipse cx="22" cy="87" rx="7" ry="5" fill="#27AE60"/>
    <ellipse cx="38" cy="87" rx="7" ry="5" fill="#27AE60"/>
  </svg>`;
}

function robotSVG() {
  return `<svg viewBox="0 0 60 90" xmlns="http://www.w3.org/2000/svg">
    <rect x="30" y="0" width="5" height="7" rx="2" fill="#795548"/>
    <circle cx="32" cy="1" r="4" fill="#F1C40F"/>
    <rect x="14" y="6"  width="32" height="26" rx="5" fill="#795548"/>
    <rect x="18" y="12" width="10" height="8"  rx="2" fill="#222"/>
    <rect x="32" y="12" width="10" height="8"  rx="2" fill="#222"/>
    <circle cx="23" cy="16" r="3" fill="#2196F3"/>
    <circle cx="37" cy="16" r="3" fill="#2196F3"/>
    <rect x="18" y="24" width="24" height="5" rx="2" fill="#222"/>
    <rect x="20" y="25" width="5"  height="3" rx="1" fill="#F1C40F"/>
    <rect x="28" y="25" width="5"  height="3" rx="1" fill="#F1C40F"/>
    <rect x="36" y="25" width="5"  height="3" rx="1" fill="#F1C40F"/>
    <rect x="12" y="32" width="36" height="30" rx="5" fill="#795548"/>
    <rect x="18" y="38" width="24" height="16" rx="3" fill="#222"/>
    <circle cx="30" cy="46" r="5" fill="#F1C40F"/>
    <rect x="2"   y="33" width="11" height="22" rx="4" fill="#795548"/>
    <rect x="47"  y="33" width="11" height="22" rx="4" fill="#795548"/>
    <ellipse cx="7"  cy="58" rx="6" ry="6" fill="#F1C40F"/>
    <ellipse cx="53" cy="58" rx="6" ry="6" fill="#F1C40F"/>
    <rect x="16" y="62" width="11" height="22" rx="4" fill="#795548"/>
    <rect x="33" y="62" width="11" height="22" rx="4" fill="#795548"/>
    <ellipse cx="21" cy="84" rx="8" ry="5" fill="#F1C40F"/>
    <ellipse cx="39" cy="84" rx="8" ry="5" fill="#F1C40F"/>
  </svg>`;
}

// ================================================================
// QUESTION DISPLAY
// ================================================================
function loadQuestion(qObj) {
  state.current = qObj;

  const emojiArea = document.getElementById('emoji-area');
  const qText     = document.getElementById('q-text');
  const btns      = document.querySelectorAll('.btn');

  if (qObj.type === 'count') {
    // Scale emoji size based on count
    const count    = qObj.emojis.length / 2; // rough emoji count (each emoji ~2 chars)
    const fontSize = count <= 5 ? 44 : count <= 10 ? 34 : count <= 15 ? 28 : 24;

    emojiArea.style.display   = 'block';
    emojiArea.style.fontSize  = fontSize + 'px';
    emojiArea.textContent     = qObj.emojis;
    qText.style.display       = 'none';
  } else {
    emojiArea.style.display = 'none';
    qText.style.display     = 'block';
    qText.textContent       = qObj.text;
  }

  btns.forEach((btn, i) => {
    btn.textContent = qObj.a[i];
    btn.disabled    = false;
    btn.className   = 'btn btn-' + ['a', 'b', 'c'][i];
    // Make emoji answers bigger
    btn.style.fontSize = (qObj.type === 'read' && qObj.a[i].length <= 4) ? '36px' : '26px';
  });
}

// ================================================================
// ANSWER
// ================================================================
function answer(idx) {
  if (state.busy || !state.current) return;
  state.busy = true;

  const btns = document.querySelectorAll('.btn');
  btns.forEach(b => b.disabled = true);

  if (idx === state.current.ok) {
    btns[idx].classList.add('flash-ok');
    setTimeout(onCorrect, 600);
  } else {
    btns[idx].classList.add('flash-no');
    shakeHero();
    setTimeout(() => {
      loadQuestion(state.current);
      state.busy = false;
    }, 750);
  }
}

function onCorrect() {
  // Add coin
  state.coins++;
  document.getElementById('coin-count').textContent = state.coins;

  // Move hero toward next enemy
  const stopIdx = state.defeated + 1;
  moveHero(stopIdx, true, () => {
    defeatEnemy(state.defeated, () => {
      state.defeated++;

      if (state.defeated >= 7) {
        // All 7 defeated â€” gallop to bucket!
        setTimeout(() => {
          moveHero(8, true, () => {
            celebrate();
            setTimeout(showWin, 1200);
          });
        }, 400);
      } else {
        state.busy = false;
        loadQuestion(state.questions[state.defeated]);
      }
    });
  });
}

// ================================================================
// DEFEAT ENEMY
// ================================================================
function defeatEnemy(idx, cb) {
  const enemy = document.getElementById('enemy' + idx);
  if (!enemy) { if (cb) cb(); return; }

  enemy.classList.add('defeated');

  // Floating coin at enemy position
  const gameRect  = document.getElementById('game').getBoundingClientRect();
  const enemyRect = enemy.getBoundingClientRect();
  const coin = document.createElement('div');
  coin.className    = 'float-coin';
  coin.textContent  = 'ğŸª™';
  coin.style.left   = (enemyRect.left - gameRect.left + 15) + 'px';
  coin.style.top    = (enemyRect.top  - gameRect.top  + 20) + 'px';
  document.getElementById('game').appendChild(coin);
  setTimeout(() => coin.remove(), 1000);

  setTimeout(() => { if (cb) cb(); }, 700);
}

// ================================================================
// HERO MOVEMENT
// ================================================================
function moveHero(stopIdx, animate, cb) {
  const hero = document.getElementById('hero');
  hero.classList.remove('gallop', 'shake', 'celebrate');

  if (!animate) {
    hero.style.transition = 'none';
    hero.style.left = STOPS[stopIdx];
    void hero.offsetWidth;
    hero.style.transition = '';
    if (cb) cb();
    return;
  }

  void hero.offsetWidth;
  hero.classList.add('gallop');
  hero.style.left = STOPS[stopIdx];

  setTimeout(() => {
    hero.classList.remove('gallop');
    if (cb) cb();
  }, 1050);
}

function shakeHero() {
  const hero = document.getElementById('hero');
  hero.classList.remove('shake');
  void hero.offsetWidth;
  hero.classList.add('shake');
  setTimeout(() => hero.classList.remove('shake'), 550);
}

function resetHero() {
  const hero = document.getElementById('hero');
  hero.classList.remove('gallop', 'shake', 'celebrate');
  moveHero(0, false);
}

// ================================================================
// WIN & CONFETTI
// ================================================================
function celebrate() {
  document.getElementById('hero').classList.add('celebrate');
  spawnConfetti();
}

function showWin() {
  document.getElementById('final-coins').textContent = state.coins;
  document.getElementById('win-screen').style.display = 'flex';
}

function spawnConfetti() {
  const colors = ['#F1C40F','#E74C3C','#3498DB','#2ECC71','#9B59B6','#ff69b4','#ffffff','#E67E22'];
  const game   = document.getElementById('game');

  for (let i = 0; i < 65; i++) {
    const el = document.createElement('div');
    el.className = 'confetti';
    el.style.cssText = `
      left:${Math.random() * 100}%;
      top:-12px;
      width:${6 + Math.random() * 11}px;
      height:${6 + Math.random() * 11}px;
      background:${colors[i % colors.length]};
      animation-duration:${1.5 + Math.random() * 2}s;
      animation-delay:${Math.random() * 0.9}s;
    `;
    game.appendChild(el);
    setTimeout(() => el.remove(), 5000);
  }
}

// ================================================================
// RESET
// ================================================================
function resetGame() {
  document.querySelectorAll('.confetti').forEach(el => el.remove());
  document.getElementById('hero').classList.remove('celebrate', 'gallop', 'shake');
  initGame();
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ================================================================
// START
// ================================================================
window.addEventListener('load', initGame);
</script>
</body>
</html>
